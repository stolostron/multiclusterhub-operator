
# Source: flightctl/templates/flightctl-alertmanager-proxy-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: flightctl-alertmanager-proxy-config
  namespace: {{ .Values.global.namespace }}
data:
  config.yaml: |-
    database:
      hostname: flightctl-db.{{ .Values.global.namespace }}.svc.cluster.local
      type: "pgsql"
      port: 5432
      name: flightctl
    service:
      certStore: "/app/certs"
      
      rateLimit:
          requests: 60
          window: 1m
          authRequests: 10
          authWindow: 1h
          trustedProxies:
              - "10.0.0.0/8"
              - "172.16.0.0/12"
              - "192.168.0.0/16"
      
    ca:
      internalConfig:
        certStore: "/tmp/ca-certs"
    auth:
      insecureSkipTlsVerify: false
      k8s:
        apiUrl: https://kubernetes.default.svc
        externalOpenShiftApiUrl: {{ .Values.global.apiUrl }}
        rbacNs: {{ .Values.global.namespace }}
    organizations:
      enabled: false
